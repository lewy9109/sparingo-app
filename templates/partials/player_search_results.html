{{ define "player_search_results.html" }}
<div id="player-search-results" class="mt-3 grid gap-2">
  {{ if not .CanManage }}
    <div class="text-sm text-slate-500">Brak uprawnien do dodawania graczy.</div>
  {{ else if .EmptyQuery }}
    <div class="text-sm text-slate-500">Wpisz imie lub email, aby wyszukac graczy.</div>
  {{ else if .Results }}
    {{ range .Results }}
      <div class="flex flex-wrap items-center justify-between gap-3 rounded-xl border border-slate-200/80 bg-slate-50 px-4 py-3">
        <div>
          <div class="text-sm text-slate-500">{{ .User.Email }}</div>
          <div class="text-base font-medium">{{ .User.FullName }}</div>
        </div>
        {{ if .InLeague }}
          <span class="badge badge-outline">Dodany</span>
        {{ else }}
          <form method="post" action="/leagues/{{ $.LeagueID }}/players" hx-post="/leagues/{{ $.LeagueID }}/players" hx-target="#player-search-results" hx-swap="outerHTML">
            <input type="hidden" name="user_id" value="{{ .User.ID }}">
            <input type="hidden" name="q" value="{{ $.Query }}">
            <button class="btn btn-xs btn-primary">Dodaj</button>
          </form>
        {{ end }}
      </div>
    {{ end }}
  {{ else }}
    <div class="text-sm text-slate-500">Brak pasujacych graczy.</div>
  {{ end }}
</div>
{{ if .IncludePanel }}
  {{ template "league_players_panel.html" .PlayersPanel }}
{{ end }}
{{ end }}
